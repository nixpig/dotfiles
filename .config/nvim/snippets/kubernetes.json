{
  "Kubernetes Helm Postgres Template": {
    "prefix": "k-postgres",
    "body": [
      "# postgres:",
      "#   name: postgres",
      "#   image:",
      "#     tag: latest",
      "#     imagePullPolicy: IfNotPresent",
      "#",
      "#   hostname: postgres",
      "#   port: 5432",
      "#   storage: 2Gi",
      "#",
      "#   username: postgres",
      "#   password: mysecretpassword",
      "#   database: postgres",
      "#",
      "#   resources:",
      "#     requests:",
      "#       cpu: 100m",
      "#       memory: 128Mi",
      "#     limits:",
      "#       cpu: 500m",
      "#       memory: 512Mi",
      "",
      "---",
      "apiVersion: apps/v1",
      "kind: Deployment",
      "metadata:",
      "  labels:",
      "    app: {{ .Values.${1:postgres}.name }}",
      "  name: {{ .Values.$1.name }}",
      "spec:",
      "  replicas: 1",
      "  selector:",
      "    matchLabels:",
      "      app: {{ .Values.$1.name }}",
      "  template:",
      "    metadata:",
      "      labels:",
      "        app: {{ .Values.$1.name }}",
      "    spec:",
      "      containers:",
      "      - image: \"postgres:{{ .Values.$1.image.tag }}\"",
      "        name: {{ .Values.$1.name }}",
      "        imagePullPolicy: {{ .Values.$1.image.imagePullPolicy }}",
      "        resources:",
      "          {{- with .Values.$1.resources }}",
      "          {{- toYaml . | nindent 10 }}",
      "          {{- end }}",
      "        readinessProbe:",
      "          exec:",
      "            command: [\"pg_isready\", \"-U\", {{ .Values.$1.username | quote }}]",
      "        ports:",
      "          - containerPort: {{ .Values.$1.port }}",
      "        env:",
      "        - name: PGDATA",
      "          value: \"/var/lib/postgresql/data/pgdata\"",
      "        - name: POSTGRES_USER",
      "          valueFrom:",
      "            configMapKeyRef:",
      "              key: POSTGRES_USER",
      "              name: {{ .Values.$1.name }}-config",
      "        - name: POSTGRES_DB",
      "          valueFrom:",
      "            configMapKeyRef:",
      "              key: POSTGRES_DB",
      "              name: {{ .Values.$1.name }}-config",
      "        - name: POSTGRES_PASSWORD",
      "          valueFrom:",
      "            secretKeyRef:",
      "              key: POSTGRES_PASSWORD",
      "              name: {{ .Values.$1.name }}-secret",
      "        volumeMounts:",
      "        - mountPath: /var/lib/postgresql/data",
      "          name: {{ .Values.$1.name }}-volume",
      "      volumes:",
      "      - name: {{ .Values.$1.name }}-volume",
      "        persistentVolumeClaim:",
      "          claimName: {{ .Values.$1.name }}-pvc",
      "",
      "---",
      "apiVersion: v1",
      "kind: PersistentVolumeClaim",
      "metadata:",
      "  name: {{ .Values.$1.name }}-pvc",
      "  labels:",
      "    app: {{ .Values.$1.name }}-pvc",
      "spec:",
      "  accessModes:",
      "  - ReadWriteOnce",
      "  resources:",
      "    requests:",
      "      storage: {{ .Values.$1.storage }}",
      "",
      "---",
      "apiVersion: v1",
      "kind: Service",
      "metadata:",
      "  name: {{ .Values.$1.name }}",
      "spec:",
      "  selector:",
      "    app: {{ .Values.$1.name }}",
      "  type: ClusterIP",
      "  ports:",
      "  - name: {{ .Values.$1.name }}",
      "    protocol: TCP",
      "    port: {{ .Values.$1.port }}",
      "    targetPort: {{ .Values.$1.port }}",
      "",
      "---",
      "apiVersion: v1",
      "kind: ConfigMap",
      "metadata:",
      "  name: {{ .Values.$1.name }}-config",
      "data:",
      "  POSTGRES_USER: {{ .Values.$1.username | quote }}",
      "  POSTGRES_DB: {{ .Values.$1.database | quote }}",
      "",
      "---",
      "apiVersion: v1",
      "kind: Secret",
      "metadata:",
      "  name: {{ .Values.$1.name }}-secret",
      "type: Opaque",
      "data:",
      "  POSTGRES_PASSWORD: {{ .Values.$1.password | b64enc }}",
      "",
      "---",
      "$0"
    ],
    "description": "Helm template for PostgreSQL deployment with ConfigMap, Secret, PVC, and Service"
  },
  "Kubernetes Helm Redis Template": {
    "prefix": "helm-redis",
    "body": [
      "# redis:",
      "#   name: redis",
      "#   image:",
      "#     tag: latest",
      "#     imagePullPolicy: IfNotPresent",
      "#",
      "#   port: 6379",
      "#   storage: 1Gi",
      "#",
      "#   password: mysecretpassword",
      "#",
      "#   resources:",
      "#     requests:",
      "#       cpu: 100m",
      "#       memory: 128Mi",
      "#     limits:",
      "#       cpu: 500m",
      "#       memory: 512Mi",
      "",
      "---",
      "apiVersion: apps/v1",
      "kind: Deployment",
      "metadata:",
      "  labels:",
      "    app: {{ .Values.${1:redis}.name }}",
      "  name: {{ .Values.$1.name }}",
      "spec:",
      "  replicas: 1",
      "  selector:",
      "    matchLabels:",
      "      app: {{ .Values.$1.name }}",
      "  template:",
      "    metadata:",
      "      labels:",
      "        app: {{ .Values.$1.name }}",
      "    spec:",
      "      containers:",
      "      - image: \"redis:{{ .Values.$1.image.tag }}\"",
      "        name: {{ .Values.$1.name }}",
      "        imagePullPolicy: {{ .Values.$1.image.imagePullPolicy }}",
      "        args: [\"--requirepass\", \"\\$(REDIS_PASSWORD)\"]",
      "        resources:",
      "          {{- with .Values.$1.resources }}",
      "          {{- toYaml . | nindent 10 }}",
      "          {{- end }}",
      "        readinessProbe:",
      "          exec:",
      "            command: [\"redis-cli\", \"-a\", \"\\$(REDIS_PASSWORD)\", \"ping\"]",
      "        ports:",
      "          - containerPort: {{ .Values.$1.port }}",
      "        env:",
      "        - name: REDIS_PASSWORD",
      "          valueFrom:",
      "            secretKeyRef:",
      "              key: REDIS_PASSWORD",
      "              name: {{ .Values.$1.name }}-secret",
      "        volumeMounts:",
      "        - mountPath: /data",
      "          name: {{ .Values.$1.name }}-volume",
      "      volumes:",
      "      - name: {{ .Values.$1.name }}-volume",
      "        persistentVolumeClaim:",
      "          claimName: {{ .Values.$1.name }}-pvc",
      "",
      "---",
      "apiVersion: v1",
      "kind: PersistentVolumeClaim",
      "metadata:",
      "  name: {{ .Values.$1.name }}-pvc",
      "  labels:",
      "    app: {{ .Values.$1.name }}-pvc",
      "spec:",
      "  accessModes:",
      "  - ReadWriteOnce",
      "  resources:",
      "    requests:",
      "      storage: {{ .Values.$1.storage }}",
      "",
      "---",
      "apiVersion: v1",
      "kind: Service",
      "metadata:",
      "  name: {{ .Values.$1.name }}",
      "spec:",
      "  selector:",
      "    app: {{ .Values.$1.name }}",
      "  type: ClusterIP",
      "  ports:",
      "  - name: {{ .Values.$1.name }}",
      "    protocol: TCP",
      "    port: {{ .Values.$1.port }}",
      "    targetPort: {{ .Values.$1.port }}",
      "",
      "---",
      "apiVersion: v1",
      "kind: Secret",
      "metadata:",
      "  name: {{ .Values.$1.name }}-secret",
      "type: Opaque",
      "data:",
      "  REDIS_PASSWORD: {{ .Values.$1.password | b64enc }}",
      "",
      "---",
      "$0"
    ],
    "description": "Helm template for Redis deployment with Secret, PVC, and Service"
  }
}
